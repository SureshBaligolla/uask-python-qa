{"uid":"189afa0d640b97a6","name":"test_simple_chat_responses[desktop-testdata0]","fullName":"tests.test_chat_validation#test_simple_chat_responses","historyId":"8af8d454aa116ff6c8d45454502607bf","time":{"start":1761911973359,"stop":1761912022750,"duration":49391},"description":"\n    Validate chatbot responses semantically using OpenAI embeddings.\n    Also validate multilingual behavior: English (LTR) and Arabic (RTL).\n    ","descriptionHtml":"<pre><code>Validate chatbot responses semantically using OpenAI embeddings.\nAlso validate multilingual behavior: English (LTR) and Arabic (RTL).\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: ❌ No AI response captured for English prompt\nassert ('')","statusTrace":"driver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"7d4b332933b1446b6ad7ff6e0cc26e76\")>\ntestdata = {'expected_en': 'The UAE government offers a wide range of services including Emirates ID issuance, passport renewal, ...t of these are available through the UAE digital government portal.', 'prompt_en': 'What are UAE government services?'}\n\n    @pytest.mark.parametrize(\"testdata\", json.load(open(\"test_data/test-data.json\", encoding=\"utf-8\")))\n    def test_simple_chat_responses(driver, testdata):\n        \"\"\"\n        Validate chatbot responses semantically using OpenAI embeddings.\n        Also validate multilingual behavior: English (LTR) and Arabic (RTL).\n        \"\"\"\n        login_page = LoginPage(driver)\n        chat_page = ChatPage(driver)\n    \n        # Step 1: Login\n        assert login_page.is_loaded(), \"❌ Login page did not load properly\"\n        login_page.login()\n        assert chat_page.is_ready(), \"❌ Chatbox not ready after login\"\n    \n        # ============================================================\n        # \uD83C\uDF0D ENGLISH TEST\n        # ============================================================\n        prompt_en = testdata.get(\"prompt_en\")\n        expected_en = testdata.get(\"expected_en\")\n    \n        if prompt_en and expected_en:\n            chat_page.send_message(prompt_en)\n            actual_en = chat_page.wait_for_ai_response(timeout=30)\n    \n            # Retry once if response looks truncated or empty\n            if not actual_en or len(actual_en.strip()) < 50:\n                print(\"⚠️ English response seems incomplete, retrying...\")\n                time.sleep(1)\n                extra = chat_page.wait_for_ai_response(timeout=10)\n                if extra and len(extra) > len(actual_en or \"\"):\n                    actual_en = extra\n    \n            # Fail fast if empty\n>           assert actual_en and actual_en.strip(), \"❌ No AI response captured for English prompt\"\nE           AssertionError: ❌ No AI response captured for English prompt\nE           assert ('')\n\ntests/test_chat_validation.py:230: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"driver","time":{"start":1761911970584,"stop":1761911973353,"duration":2769},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"testStage":{"description":"\n    Validate chatbot responses semantically using OpenAI embeddings.\n    Also validate multilingual behavior: English (LTR) and Arabic (RTL).\n    ","status":"failed","statusMessage":"AssertionError: ❌ No AI response captured for English prompt\nassert ('')","statusTrace":"driver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"7d4b332933b1446b6ad7ff6e0cc26e76\")>\ntestdata = {'expected_en': 'The UAE government offers a wide range of services including Emirates ID issuance, passport renewal, ...t of these are available through the UAE digital government portal.', 'prompt_en': 'What are UAE government services?'}\n\n    @pytest.mark.parametrize(\"testdata\", json.load(open(\"test_data/test-data.json\", encoding=\"utf-8\")))\n    def test_simple_chat_responses(driver, testdata):\n        \"\"\"\n        Validate chatbot responses semantically using OpenAI embeddings.\n        Also validate multilingual behavior: English (LTR) and Arabic (RTL).\n        \"\"\"\n        login_page = LoginPage(driver)\n        chat_page = ChatPage(driver)\n    \n        # Step 1: Login\n        assert login_page.is_loaded(), \"❌ Login page did not load properly\"\n        login_page.login()\n        assert chat_page.is_ready(), \"❌ Chatbox not ready after login\"\n    \n        # ============================================================\n        # \uD83C\uDF0D ENGLISH TEST\n        # ============================================================\n        prompt_en = testdata.get(\"prompt_en\")\n        expected_en = testdata.get(\"expected_en\")\n    \n        if prompt_en and expected_en:\n            chat_page.send_message(prompt_en)\n            actual_en = chat_page.wait_for_ai_response(timeout=30)\n    \n            # Retry once if response looks truncated or empty\n            if not actual_en or len(actual_en.strip()) < 50:\n                print(\"⚠️ English response seems incomplete, retrying...\")\n                time.sleep(1)\n                extra = chat_page.wait_for_ai_response(timeout=10)\n                if extra and len(extra) > len(actual_en or \"\"):\n                    actual_en = extra\n    \n            # Fail fast if empty\n>           assert actual_en and actual_en.strip(), \"❌ No AI response captured for English prompt\"\nE           AssertionError: ❌ No AI response captured for English prompt\nE           assert ('')\n\ntests/test_chat_validation.py:230: AssertionError","steps":[],"attachments":[{"uid":"9d31c0db6c7cd4fb","name":"log","source":"9d31c0db6c7cd4fb.txt","type":"text/plain","size":394},{"uid":"a6b0d39bc194ffcf","name":"stdout","source":"a6b0d39bc194ffcf.txt","type":"text/plain","size":479}],"parameters":[],"stepsCount":0,"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":true,"attachmentsCount":2},"afterStages":[{"name":"driver::0","time":{"start":1761912369039,"stop":1761912369096,"duration":57},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_chat_validation"},{"name":"host","value":"Hemanth.local"},{"name":"thread","value":"25076-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_chat_validation"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"driver","value":"'desktop'"},{"name":"testdata","value":"{'prompt_en': 'What are UAE government services?', 'expected_en': 'The UAE government offers a wide range of services including Emirates ID issuance, passport renewal, visa processing, healthcare registration, and business licensing. Most of these are available through the UAE digital government portal.'}"}],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"189afa0d640b97a6.json","parameterValues":["'desktop'","{'prompt_en': 'What are UAE government services?', 'expected_en': 'The UAE government offers a wide range of services including Emirates ID issuance, passport renewal, visa processing, healthcare registration, and business licensing. Most of these are available through the UAE digital government portal.'}"]}