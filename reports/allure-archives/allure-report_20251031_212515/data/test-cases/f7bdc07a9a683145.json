{"uid":"f7bdc07a9a683145","name":"test_simple_chat_responses[mobile-testdata0]","fullName":"tests.test_chat_validation#test_simple_chat_responses","historyId":"15ea382c97fd61d1e36a77ece7adbfe2","time":{"start":1761913623275,"stop":1761913669549,"duration":46274},"description":"\n    Validate chatbot responses semantically using OpenAI embeddings.\n    Also validate multilingual behavior: English (LTR) and Arabic (RTL).\n    ","descriptionHtml":"<pre><code>Validate chatbot responses semantically using OpenAI embeddings.\nAlso validate multilingual behavior: English (LTR) and Arabic (RTL).\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: ❌ No AI response captured for English prompt\nassert ('')","statusTrace":"driver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"1790e15ff0813a8eeb230d92a3bae72d\")>\ntestdata = {'expected_en': 'The UAE government offers a wide range of services including Emirates ID issuance, passport renewal, ...t of these are available through the UAE digital government portal.', 'prompt_en': 'What are UAE government services?'}\n\n    @pytest.mark.parametrize(\"testdata\", json.load(open(\"test_data/test-data.json\", encoding=\"utf-8\")))\n    def test_simple_chat_responses(driver, testdata):\n        \"\"\"\n        Validate chatbot responses semantically using OpenAI embeddings.\n        Also validate multilingual behavior: English (LTR) and Arabic (RTL).\n        \"\"\"\n        login_page = LoginPage(driver)\n        chat_page = ChatPage(driver)\n    \n        # Step 1: Login\n        assert login_page.is_loaded(), \"❌ Login page did not load properly\"\n        login_page.login()\n        assert chat_page.is_ready(), \"❌ Chatbox not ready after login\"\n    \n        # ============================================================\n        # \uD83C\uDF0D ENGLISH TEST\n        # ============================================================\n        prompt_en = testdata.get(\"prompt_en\")\n        expected_en = testdata.get(\"expected_en\")\n    \n        if prompt_en and expected_en:\n            chat_page.send_message(prompt_en)\n            actual_en = chat_page.wait_for_ai_response(timeout=30)\n    \n            # Retry once if response looks truncated or empty\n            if not actual_en or len(actual_en.strip()) < 50:\n                print(\"⚠️ English response seems incomplete, retrying...\")\n                time.sleep(1)\n                extra = chat_page.wait_for_ai_response(timeout=10)\n                if extra and len(extra) > len(actual_en or \"\"):\n                    actual_en = extra\n    \n            # Fail fast if empty\n>           assert actual_en and actual_en.strip(), \"❌ No AI response captured for English prompt\"\nE           AssertionError: ❌ No AI response captured for English prompt\nE           assert ('')\n\ntests/test_chat_validation.py:230: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"driver","time":{"start":1761913619712,"stop":1761913623271,"duration":3559},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"testStage":{"description":"\n    Validate chatbot responses semantically using OpenAI embeddings.\n    Also validate multilingual behavior: English (LTR) and Arabic (RTL).\n    ","status":"failed","statusMessage":"AssertionError: ❌ No AI response captured for English prompt\nassert ('')","statusTrace":"driver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"1790e15ff0813a8eeb230d92a3bae72d\")>\ntestdata = {'expected_en': 'The UAE government offers a wide range of services including Emirates ID issuance, passport renewal, ...t of these are available through the UAE digital government portal.', 'prompt_en': 'What are UAE government services?'}\n\n    @pytest.mark.parametrize(\"testdata\", json.load(open(\"test_data/test-data.json\", encoding=\"utf-8\")))\n    def test_simple_chat_responses(driver, testdata):\n        \"\"\"\n        Validate chatbot responses semantically using OpenAI embeddings.\n        Also validate multilingual behavior: English (LTR) and Arabic (RTL).\n        \"\"\"\n        login_page = LoginPage(driver)\n        chat_page = ChatPage(driver)\n    \n        # Step 1: Login\n        assert login_page.is_loaded(), \"❌ Login page did not load properly\"\n        login_page.login()\n        assert chat_page.is_ready(), \"❌ Chatbox not ready after login\"\n    \n        # ============================================================\n        # \uD83C\uDF0D ENGLISH TEST\n        # ============================================================\n        prompt_en = testdata.get(\"prompt_en\")\n        expected_en = testdata.get(\"expected_en\")\n    \n        if prompt_en and expected_en:\n            chat_page.send_message(prompt_en)\n            actual_en = chat_page.wait_for_ai_response(timeout=30)\n    \n            # Retry once if response looks truncated or empty\n            if not actual_en or len(actual_en.strip()) < 50:\n                print(\"⚠️ English response seems incomplete, retrying...\")\n                time.sleep(1)\n                extra = chat_page.wait_for_ai_response(timeout=10)\n                if extra and len(extra) > len(actual_en or \"\"):\n                    actual_en = extra\n    \n            # Fail fast if empty\n>           assert actual_en and actual_en.strip(), \"❌ No AI response captured for English prompt\"\nE           AssertionError: ❌ No AI response captured for English prompt\nE           assert ('')\n\ntests/test_chat_validation.py:230: AssertionError","steps":[],"attachments":[{"uid":"de30d2c06b0ce99f","name":"log","source":"de30d2c06b0ce99f.txt","type":"text/plain","size":394},{"uid":"a6c12749aea5e74c","name":"stdout","source":"a6c12749aea5e74c.txt","type":"text/plain","size":565}],"parameters":[],"stepsCount":0,"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":true,"attachmentsCount":2},"afterStages":[{"name":"driver::0","time":{"start":1761915392975,"stop":1761915392979,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_chat_validation"},{"name":"host","value":"Hemanth.local"},{"name":"thread","value":"25458-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_chat_validation"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"driver","value":"'mobile'"},{"name":"testdata","value":"{'prompt_en': 'What are UAE government services?', 'expected_en': 'The UAE government offers a wide range of services including Emirates ID issuance, passport renewal, visa processing, healthcare registration, and business licensing. Most of these are available through the UAE digital government portal.'}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":[]},"source":"f7bdc07a9a683145.json","parameterValues":["'mobile'","{'prompt_en': 'What are UAE government services?', 'expected_en': 'The UAE government offers a wide range of services including Emirates ID issuance, passport renewal, visa processing, healthcare registration, and business licensing. Most of these are available through the UAE digital government portal.'}"]}