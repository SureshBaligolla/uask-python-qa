{"uid":"229e19c7227f710b","name":"test_simple_chat_responses[desktop-testdata2]","fullName":"tests.test_chat_validation#test_simple_chat_responses","historyId":"a931b42bc6d20ef52909a33822b0bbbe","time":{"start":1761912125616,"stop":1761912227995,"duration":102379},"description":"\n    Validate chatbot responses semantically using OpenAI embeddings.\n    Also validate multilingual behavior: English (LTR) and Arabic (RTL).\n    ","descriptionHtml":"<pre><code>Validate chatbot responses semantically using OpenAI embeddings.\nAlso validate multilingual behavior: English (LTR) and Arabic (RTL).\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: ❌ No AI response captured for English prompt\nassert ('')","statusTrace":"driver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"7d4b332933b1446b6ad7ff6e0cc26e76\")>\ntestdata = {'expected_en': 'Hello! How can I help you today? If you have any questions about government operations, Emirati culture, or need definitions or information, just let me know.', 'prompt_en': 'Hello'}\n\n    @pytest.mark.parametrize(\"testdata\", json.load(open(\"test_data/test-data.json\", encoding=\"utf-8\")))\n    def test_simple_chat_responses(driver, testdata):\n        \"\"\"\n        Validate chatbot responses semantically using OpenAI embeddings.\n        Also validate multilingual behavior: English (LTR) and Arabic (RTL).\n        \"\"\"\n        login_page = LoginPage(driver)\n        chat_page = ChatPage(driver)\n    \n        # Step 1: Login\n        assert login_page.is_loaded(), \"❌ Login page did not load properly\"\n        login_page.login()\n        assert chat_page.is_ready(), \"❌ Chatbox not ready after login\"\n    \n        # ============================================================\n        # \uD83C\uDF0D ENGLISH TEST\n        # ============================================================\n        prompt_en = testdata.get(\"prompt_en\")\n        expected_en = testdata.get(\"expected_en\")\n    \n        if prompt_en and expected_en:\n            chat_page.send_message(prompt_en)\n            actual_en = chat_page.wait_for_ai_response(timeout=30)\n    \n            # Retry once if response looks truncated or empty\n            if not actual_en or len(actual_en.strip()) < 50:\n                print(\"⚠️ English response seems incomplete, retrying...\")\n                time.sleep(1)\n                extra = chat_page.wait_for_ai_response(timeout=10)\n                if extra and len(extra) > len(actual_en or \"\"):\n                    actual_en = extra\n    \n            # Fail fast if empty\n>           assert actual_en and actual_en.strip(), \"❌ No AI response captured for English prompt\"\nE           AssertionError: ❌ No AI response captured for English prompt\nE           assert ('')\n\ntests/test_chat_validation.py:230: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"driver","time":{"start":1761911970584,"stop":1761911973353,"duration":2769},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"testStage":{"description":"\n    Validate chatbot responses semantically using OpenAI embeddings.\n    Also validate multilingual behavior: English (LTR) and Arabic (RTL).\n    ","status":"failed","statusMessage":"AssertionError: ❌ No AI response captured for English prompt\nassert ('')","statusTrace":"driver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"7d4b332933b1446b6ad7ff6e0cc26e76\")>\ntestdata = {'expected_en': 'Hello! How can I help you today? If you have any questions about government operations, Emirati culture, or need definitions or information, just let me know.', 'prompt_en': 'Hello'}\n\n    @pytest.mark.parametrize(\"testdata\", json.load(open(\"test_data/test-data.json\", encoding=\"utf-8\")))\n    def test_simple_chat_responses(driver, testdata):\n        \"\"\"\n        Validate chatbot responses semantically using OpenAI embeddings.\n        Also validate multilingual behavior: English (LTR) and Arabic (RTL).\n        \"\"\"\n        login_page = LoginPage(driver)\n        chat_page = ChatPage(driver)\n    \n        # Step 1: Login\n        assert login_page.is_loaded(), \"❌ Login page did not load properly\"\n        login_page.login()\n        assert chat_page.is_ready(), \"❌ Chatbox not ready after login\"\n    \n        # ============================================================\n        # \uD83C\uDF0D ENGLISH TEST\n        # ============================================================\n        prompt_en = testdata.get(\"prompt_en\")\n        expected_en = testdata.get(\"expected_en\")\n    \n        if prompt_en and expected_en:\n            chat_page.send_message(prompt_en)\n            actual_en = chat_page.wait_for_ai_response(timeout=30)\n    \n            # Retry once if response looks truncated or empty\n            if not actual_en or len(actual_en.strip()) < 50:\n                print(\"⚠️ English response seems incomplete, retrying...\")\n                time.sleep(1)\n                extra = chat_page.wait_for_ai_response(timeout=10)\n                if extra and len(extra) > len(actual_en or \"\"):\n                    actual_en = extra\n    \n            # Fail fast if empty\n>           assert actual_en and actual_en.strip(), \"❌ No AI response captured for English prompt\"\nE           AssertionError: ❌ No AI response captured for English prompt\nE           assert ('')\n\ntests/test_chat_validation.py:230: AssertionError","steps":[],"attachments":[{"uid":"f5cd3c0d982c59dd","name":"stdout","source":"f5cd3c0d982c59dd.txt","type":"text/plain","size":2010}],"parameters":[],"stepsCount":0,"hasContent":true,"attachmentStep":false,"shouldDisplayMessage":true,"attachmentsCount":1},"afterStages":[{"name":"driver::0","time":{"start":1761912369039,"stop":1761912369096,"duration":57},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentStep":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_chat_validation"},{"name":"host","value":"Hemanth.local"},{"name":"thread","value":"25076-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_chat_validation"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"driver","value":"'desktop'"},{"name":"testdata","value":"{'prompt_en': 'Hello', 'expected_en': 'Hello! How can I help you today? If you have any questions about government operations, Emirati culture, or need definitions or information, just let me know.'}"}],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"229e19c7227f710b.json","parameterValues":["'desktop'","{'prompt_en': 'Hello', 'expected_en': 'Hello! How can I help you today? If you have any questions about government operations, Emirati culture, or need definitions or information, just let me know.'}"]}